{% extends 'gov.html' %}
{% block content %}
<style>
    .reports-card {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 24px rgba(44,62,80,0.10);
        padding: 36px 28px;
        margin: 40px auto;
        max-width: 900px;
    }
    .reports-header {
        text-align: center;
        margin-bottom: 32px;
    }
    .reports-header h2 {
        color: #004080;
        font-weight: 700;
        font-size: 2rem;
        letter-spacing: 1px;
        margin-bottom: 8px;
    }
    .reports-header p {
        color: #2d7a2d;
        font-size: 1.1em;
        margin-bottom: 0;
    }
    .summary-row {
        display: flex;
        justify-content: space-around;
        margin-bottom: 32px;
        gap: 24px;
        flex-wrap: wrap;
    }
    .summary-box {
        background: linear-gradient(90deg, #4ff005 0%, #004080 100%);
        color: #fff;
        border-radius: 12px;
        padding: 18px 24px;
        font-size: 1.2em;
        font-weight: 700;
        text-align: center;
        box-shadow: 0 2px 12px rgba(44,62,80,0.06);
        flex: 1 1 220px;
        margin: 8px 0;
    }
    .group-table {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(44,62,80,0.06);
        margin-bottom: 24px;
        border: 1px solid #e0e0ef;
        width: 100%;
        overflow: hidden;
    }
    .group-table th, .group-table td {
        border: 1px solid #e0e0ef !important;
        padding: 10px 12px;
        font-size: 1.05em;
    }
    .group-table th {
        background: #f3f3fa;
        color: #004080;
        font-weight: 700;
    }
    .group-table tbody tr:nth-child(even) {
        background: #f7f8fa;
    }
    .group-table tbody tr:nth-child(odd) {
        background: #eafbe7;
    }
    .section-title {
        color: #4e54c8;
        font-weight: 600;
        font-size: 1.15em;
        margin: 24px 0 12px 0;
        letter-spacing: 1px;
    }
    @media (max-width: 700px) {
        .reports-card {
            padding: 16px 4px;
        }
        .reports-header h2 {
            font-size: 1.3rem;
        }
        .summary-row {
            flex-direction: column;
            gap: 12px;
        }
        .summary-box {
            font-size: 1em;
            padding: 12px 8px;
        }
        .group-table th, .group-table td {
            font-size: 0.97em;
            padding: 8px 6px;
        }
    }
</style>
<div class="reports-card">
    <div class="reports-header">
        <h2><i class="fa fa-chart-bar me-2"></i>CDMIS Reports</h2>
        <p>Overview of financials, groups, and trainings</p>
    </div>
    <div class="summary-row">
        <div class="summary-box">
            <i class="fa fa-coins me-2"></i>
            Total Financials<br>
            <span style="font-size:1.3em;">Ksh. {{ total_financials|floatformat:2 }}</span>
        </div>
        <div class="summary-box">
            <i class="fa fa-users me-2"></i>
            Total Groups<br>
            <span style="font-size:1.3em;">{{ below_5000_groups|length|add:above_5000_groups|length }}</span>
        </div>
        <div class="summary-box">
            <i class="fa fa-chalkboard-teacher me-2"></i>
            Trainings Covered<br>
            <span style="font-size:1.3em;">{{ total_trainings }}</span>
        </div>
    </div>
    <div class="section-title"><i class="fa fa-arrow-down me-2"></i>Groups Paid Below Ksh. 5,000</div>
    <table class="group-table">
        <thead>
            <tr>
                <th>#</th>
                <th>Group Name</th>
                <th>Amount Paid</th>
            </tr>
        </thead>
        <tbody>
            {% for group in below_5000_groups %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ group.name }}</td>
                <td>Ksh. {{ group.total_paid|default:0|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" class="text-center">No groups found below Ksh. 5,000.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="section-title"><i class="fa fa-arrow-up me-2"></i>Groups Paid Ksh. 5,000 and Above</div>
    <table class="group-table">
        <thead>
            <tr>
                <th>#</th>
                <th>Group Name</th>
                <th>Amount Paid</th>
            </tr>
        </thead>
        <tbody>
            {% for group in above_5000_groups %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ group.name }}</td>
                <td>Ksh. {{ group.total_paid|default:0|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" class="text-center">No groups found above Ksh. 5,000.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}