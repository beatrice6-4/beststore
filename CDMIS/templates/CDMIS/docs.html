{% extends 'gov.html' %}
{% load static %}
{% block page_title %}Documents{% endblock %}
{% block breadcrumb %}Documents{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2><i class="fas fa-file-alt"></i> Documents</h2>
    {% if user.is_staff or user.is_superuser %}
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">Upload Document</div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn btn-success">Upload</button>
            </form>
        </div>
    </div>
    {% endif %}
    <div class="card">
        <div class="card-header bg-success text-white">Available Documents</div>
        <div class="card-body">
            {% if documents %}
            <ul class="list-group">
                {% for doc in documents %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>{{ doc.title }}</strong>
                        <br>
                        <small class="text-muted">Uploaded by {{ doc.uploaded_by }} on {{ doc.uploaded_at|date:"M d, Y H:i" }}</small>
                    </div>
                    <a href="{{ doc.file.url }}" class="btn btn-sm btn-primary" download>
                        <i class="fa fa-download"></i> Download
                    </a>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <div class="alert alert-info">No documents available.</div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}