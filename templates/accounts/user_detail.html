{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>User Details: {{ user_obj.username }}</h2>
    <ul class="list-group mb-3">
        <li class="list-group-item"><strong>Email:</strong> {{ user_obj.email }}</li>
        <li class="list-group-item"><strong>Role:</strong> {{ user_obj.role }}</li>
        <li class="list-group-item"><strong>Status:</strong>
            {% if user_obj.is_active %}
                <span class="badge bg-success">Active</span>
            {% else %}
                <span class="badge bg-danger">Inactive</span>
            {% endif %}
        </li>
    </ul>
    <form method="post" class="mb-2">
        {% csrf_token %}
        <input type="hidden" name="user_id" value="{{ user_obj.id }}">
        <button type="submit" name="action" value="activate" class="btn btn-success">Activate</button>
        <button type="submit" name="action" value="deactivate" class="btn btn-warning">Deactivate</button>
        <button type="submit" name="action" value="delete" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this user?');">Delete</button>
    </form>
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="user_id" value="{{ user_obj.id }}">
        <div class="mb-2">
            <label for="new_role" class="form-label">Change Role:</label>
            <select name="new_role" id="new_role" class="form-select">
                <option value="user" {% if user_obj.role == 'user' %}selected{% endif %}>User</option>
                <option value="finance" {% if user_obj.role == 'finance' %}selected{% endif %}>Finance</option>
                <option value="admin" {% if user_obj.role == 'admin' %}selected{% endif %}>Admin</option>
            </select>
        </div>
        <button type="submit" name="action" value="change_role" class="btn btn-primary">Change Role</button>
    </form>
</div>
{% endblock %}